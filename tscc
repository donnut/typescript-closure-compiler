#!/usr/bin/env node

var fs = require('fs');
var path = require('path');
var tsc = path.join(path.dirname(require.resolve('typescript')), 'tsc.js');

eval(fs
  .readFileSync(tsc, 'utf8')
  .replace(/batch\.batchCompile\(\);\s*$/, '')
  .replace(/\btsc\b/g, 'tscc'));

eval(fs.readFileSync(path.resolve(__dirname, 'emitter.js'), 'utf8'));
eval(fs.readFileSync(path.resolve(__dirname, 'patches.js'), 'utf8'));

process.mainModule.filename = tsc;
batch.batchCompile();
